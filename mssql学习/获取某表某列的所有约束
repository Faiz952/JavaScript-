-- 查找主键约束
SELECT
    kc.name AS ConstraintName,
    'Primary Key' AS ConstraintType
FROM
    sys.key_constraints AS kc
JOIN
    sys.index_columns AS ic
    ON kc.parent_object_id = ic.object_id AND kc.unique_index_id = ic.index_id
JOIN
    sys.columns AS col
    ON ic.object_id = col.object_id AND ic.column_id = col.column_id
WHERE
    ic.object_id = OBJECT_ID('test_xt') -- 替换为实际的表名
    AND col.name = 'c1' -- 替换为实际的列名

UNION ALL

-- 查找唯一约束
SELECT
    idx.name AS ConstraintName,
    'Unique' AS ConstraintType
FROM
    sys.indexes AS idx
JOIN
    sys.index_columns AS ic
    ON idx.object_id = ic.object_id AND idx.index_id = ic.index_id
JOIN
    sys.columns AS col
    ON ic.object_id = col.object_id AND ic.column_id = col.column_id
WHERE
    idx.object_id = OBJECT_ID('test_xt') -- 替换为实际的表名
    AND idx.is_unique_constraint = 1
    AND col.name = 'c1' -- 替换为实际的列名

UNION ALL

-- 查找外键约束
SELECT
    fk.name AS ConstraintName,
    'Foreign Key' AS ConstraintType
FROM
    sys.foreign_keys AS fk
JOIN
    sys.foreign_key_columns AS fkc
    ON fk.object_id = fkc.constraint_object_id
JOIN
    sys.columns AS col
    ON fkc.parent_object_id = col.object_id AND fkc.parent_column_id = col.column_id
WHERE
    fkc.parent_object_id = OBJECT_ID('test_xt') -- 替换为实际的表名
    AND col.name = 'c1' -- 替换为实际的列名

UNION ALL

-- 查找检查约束
SELECT
    cc.name AS ConstraintName,
    'Check' AS ConstraintType
FROM
    sys.check_constraints AS cc
JOIN
    sys.columns AS col
    ON cc.parent_object_id = col.object_id AND cc.parent_column_id = col.column_id
WHERE
    cc.parent_object_id = OBJECT_ID('test_xt') -- 替换为实际的表名
    AND col.name = 'c1' -- 替换为实际的列名

UNION ALL

-- 查找默认值约束
SELECT
    dc.name AS ConstraintName,
    'Default' AS ConstraintType
FROM
    sys.default_constraints AS dc
JOIN
    sys.columns AS col
    ON dc.parent_object_id = col.object_id AND dc.parent_column_id = col.column_id
WHERE
    dc.parent_object_id = OBJECT_ID('test_xt') -- 替换为实际的表名
    AND col.name = 'c1' -- 替换为实际的列名
